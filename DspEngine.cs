using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

 namespace EcgChart
{
    class DspEngine
    {
      public  static double[] num = { -0.00101930216212875,- 0.00163655834783829,- 0.00192496407192983,- 0.00159705226558244,
                - 0.000517217332395740,0.000959361234963336,0.00184522219187848,0.000900267731547129,- 0.00249020090487343,
                - 0.00744140193318375,- 0.0114405205150489,- 0.0114214064501553,- 0.00574669343473910,0.00399255183934674,
                0.0127105397018695,0.0138367492370666,0.00305738307233217,- 0.0180322719204187,- 0.0406202471535939,
                - 0.0511155081502351,- 0.0368635830240750,0.00726594780516239,0.0747176811857289,0.148008797156850,
                0.204659914315576,0.225960570631112,0.204659914315576,0.148008797156850,0.0747176811857289,0.00726594780516239,
                - 0.0368635830240750,- 0.0511155081502351,- 0.0406202471535939,- 0.0180322719204187,0.00305738307233217,
                0.0138367492370666,0.0127105397018695,0.00399255183934674,- 0.00574669343473910,- 0.0114214064501553,
                - 0.0114405205150489,- 0.00744140193318375,- 0.00249020090487343,0.000900267731547129,0.00184522219187848,
                0.000959361234963336 ,- 0.000517217332395740,- 0.00159705226558244,- 0.00192496407192983,- 0.00163655834783829,
                - 0.00101930216212875 };
        
        private static double[] xIn = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
                                       0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
        public double bcgFilter(double x) {
            return bandFilter(x);
        }

        private double bandFilter(double temp) {
            xIn[50] = temp;
            double outV= 0;
            int i;
            for (i = 0; i < 51; i++) {
                outV += num[i] * xIn[i];
            }

            for (i = 1; i < 51; i++)
            {
                xIn[i-1] = xIn[i];
            }
            return outV;
        }

    }
}
